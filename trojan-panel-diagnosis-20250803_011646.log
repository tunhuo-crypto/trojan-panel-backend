[0;32m[2025-08-03 01:16:46] 开始 Trojan Panel Docker 诊断[0m
[0;32m[2025-08-03 01:16:46] 诊断日志文件: /tmp/trojan-panel-diagnosis-20250803_011646.log[0m
[0;32m[2025-08-03 01:16:46] === 1. 系统基本信息 ===[0m
[0;34m[2025-08-03 01:16:46] INFO: 内核信息[0m
==========================================
诊断项: 内核信息
命令: uname -a
时间: Sun Aug  3 01:16:46 CST 2025
------------------------------------------
Linux solemn 3.10.0-1160.119.1.el7.x86_64 #1 SMP Tue Jun 4 14:43:51 UTC 2024 x86_64 x86_64 x86_64 GNU/Linux

✅ 成功
==========================================

[0;34m[2025-08-03 01:16:46] INFO: 操作系统版本[0m
==========================================
诊断项: 操作系统版本
命令: cat /etc/os-release
时间: Sun Aug  3 01:16:46 CST 2025
------------------------------------------
NAME="CentOS Linux"
VERSION="7 (Core)"
ID="centos"
ID_LIKE="rhel fedora"
VERSION_ID="7"
PRETTY_NAME="CentOS Linux 7 (Core)"
ANSI_COLOR="0;31"
CPE_NAME="cpe:/o:centos:centos:7"
HOME_URL="https://www.centos.org/"
BUG_REPORT_URL="https://bugs.centos.org/"

CENTOS_MANTISBT_PROJECT="CentOS-7"
CENTOS_MANTISBT_PROJECT_VERSION="7"
REDHAT_SUPPORT_PRODUCT="centos"
REDHAT_SUPPORT_PRODUCT_VERSION="7"

✅ 成功
==========================================

[0;34m[2025-08-03 01:16:46] INFO: Docker版本[0m
==========================================
诊断项: Docker版本
命令: docker --version
时间: Sun Aug  3 01:16:46 CST 2025
------------------------------------------
Docker version 26.1.4, build 5650f9b

✅ 成功
==========================================

[0;34m[2025-08-03 01:16:46] INFO: Docker Compose版本[0m
==========================================
诊断项: Docker Compose版本
命令: docker-compose --version
时间: Sun Aug  3 01:16:46 CST 2025
------------------------------------------
./trojan-panel-diagnosis.sh: line 55: docker-compose: command not found

❌ 失败 (退出码: 127)
[错误] 命令执行失败，退出码: 127
==========================================

[1;33m[2025-08-03 01:16:46] WARNING: Docker Compose 未安装[0m
[0;34m[2025-08-03 01:16:46] INFO: 内存信息[0m
==========================================
诊断项: 内存信息
命令: free -h
时间: Sun Aug  3 01:16:46 CST 2025
------------------------------------------
              total        used        free      shared  buff/cache   available
Mem:           985M        318M         30M         12M        636M        635M
Swap:          8.0G        7.3M        8.0G

✅ 成功
==========================================

[0;34m[2025-08-03 01:16:46] INFO: 磁盘空间[0m
==========================================
诊断项: 磁盘空间
命令: df -h
时间: Sun Aug  3 01:16:46 CST 2025
------------------------------------------
Filesystem      Size  Used Avail Use% Mounted on
devtmpfs        455M     0  455M   0% /dev
tmpfs           493M     0  493M   0% /dev/shm
tmpfs           493M   14M  480M   3% /run
tmpfs           493M     0  493M   0% /sys/fs/cgroup
/dev/sda3        39G  5.4G   33G  15% /
/dev/sda1       512M   12M  501M   3% /boot/efi
overlay          39G  5.4G   33G  15% /var/lib/docker/overlay2/307a9c8feb759987815866757ee927bc04a1e5f2c6d65a67591b88a99ed7dcd1/merged
overlay          39G  5.4G   33G  15% /var/lib/docker/overlay2/50f0e1c7829b723ac36c31000e5191baeeea0feae7a3f482f8b88cb11af4a33a/merged
overlay          39G  5.4G   33G  15% /var/lib/docker/overlay2/f13a1dbcd0a7115099db03114de59fbc637bb1f283bfa6845e04ef6512944392/merged
overlay          39G  5.4G   33G  15% /var/lib/docker/overlay2/82d879b3047fe9bad87c8082476d93576f8677db998d664d272d0c85922bbe58/merged
overlay          39G  5.4G   33G  15% /var/lib/docker/overlay2/e54376d589c0c65621340136f8c010611cf1cf7481da58a5f83ef66f0a03448d/merged
overlay          39G  5.4G   33G  15% /var/lib/docker/overlay2/a5d64dd047404b35981f5bc09e8b09b477c306618f5aa66f85441bb5a9738091/merged
tmpfs            99M     0   99M   0% /run/user/0
overlay          39G  5.4G   33G  15% /var/lib/docker/overlay2/88fd10f3760e802f02a150764efac0714f5504c25ff07121c2d746ddcaf6f7f1/merged

✅ 成功
==========================================

[0;34m[2025-08-03 01:16:46] INFO: CPU信息[0m
==========================================
诊断项: CPU信息
命令: lscpu
时间: Sun Aug  3 01:16:46 CST 2025
------------------------------------------
Architecture:          x86_64
CPU op-mode(s):        32-bit, 64-bit
Byte Order:            Little Endian
CPU(s):                2
On-line CPU(s) list:   0,1
Thread(s) per core:    2
Core(s) per socket:    1
Socket(s):             1
NUMA node(s):          1
Vendor ID:             AuthenticAMD
CPU family:            23
Model:                 1
Model name:            AMD EPYC 7551 32-Core Processor
Stepping:              2
CPU MHz:               1996.250
BogoMIPS:              3992.50
Virtualization:        AMD-V
Hypervisor vendor:     KVM
Virtualization type:   full
L1d cache:             64K
L1i cache:             64K
L2 cache:              512K
L3 cache:              16384K
NUMA node0 CPU(s):     0,1
Flags:                 fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx mmxext fxsr_opt pdpe1gb rdtscp lm art rep_good nopl extd_apicid eagerfpu pni pclmulqdq ssse3 fma cx16 sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand hypervisor lahf_lm cmp_legacy svm cr8_legacy abm sse4a misalignsse 3dnowprefetch osvw topoext perfctr_core ssbd rsb_ctxsw ibpb vmmcall fsgsbase tsc_adjust bmi1 avx2 smep bmi2 rdseed adx smap clflushopt sha_ni xsaveopt xsavec xgetbv1 clzero xsaveerptr virt_ssbd arat npt nrip_save vgif overflow_recov succor arch_capabilities

✅ 成功
==========================================

[0;34m[2025-08-03 01:16:46] INFO: 系统时间[0m
==========================================
诊断项: 系统时间
命令: date
时间: Sun Aug  3 01:16:46 CST 2025
------------------------------------------
Sun Aug  3 01:16:46 CST 2025

✅ 成功
==========================================

[0;32m[2025-08-03 01:16:46] === 2. Docker状态检查 ===[0m
[0;34m[2025-08-03 01:16:46] INFO: 所有容器状态[0m
==========================================
诊断项: 所有容器状态
命令: docker ps -a
时间: Sun Aug  3 01:16:46 CST 2025
------------------------------------------
CONTAINER ID   IMAGE                                COMMAND                  CREATED          STATUS                             PORTS     NAMES
bbdadd680fcf   zzsolo/trojan-panel-backend:latest   "./start.sh"             46 seconds ago   Up 45 seconds (health: starting)             trojan-panel
da539b3cfcba   zzsolo/trojan-panel-ui:latest        "/bin/sh -c 'nginx -…"   2 days ago       Up 2 days                                    trojan-panel-ui
72674889d77b   redis:6.2.7                          "docker-entrypoint.s…"   5 weeks ago      Up 4 weeks                                   trojan-panel-redis
387c7b1aa581   mariadb:10.7.3                       "docker-entrypoint.s…"   5 weeks ago      Up 4 weeks                                   trojan-panel-mariadb
c883becae68b   jonssonyan/trojan-panel-core         "/bin/sh -c 'chmod 7…"   5 weeks ago      Up 4 weeks                                   trojan-panel-core
f3dfa644ed65   caddy:2.6.2                          "caddy run --config …"   5 weeks ago      Up 4 weeks                                   trojan-panel-caddy

✅ 成功
==========================================

[0;34m[2025-08-03 01:16:47] INFO: Docker镜像列表[0m
==========================================
诊断项: Docker镜像列表
命令: docker images
时间: Sun Aug  3 01:16:47 CST 2025
------------------------------------------
REPOSITORY                     TAG       IMAGE ID       CREATED         SIZE
zzsolo/trojan-panel-backend    latest    30922ef2e65e   2 hours ago     42.3MB
zzsolo/trojan-panel-backend    <none>    6b673b61e496   2 hours ago     42.3MB
zzsolo/trojan-panel-backend    <none>    4e9fad6a09c6   2 hours ago     42.3MB
zzsolo/trojan-panel-backend    <none>    c59d28a2fa03   2 hours ago     42.3MB
zzsolo/trojan-panel-backend    <none>    9631085ce1ef   3 hours ago     42.3MB
zzsolo/trojan-panel-ui         latest    b9dab7644f34   2 days ago      29.2MB
jonssonyan/trojan-panel-core   latest    1de02ac2ce9a   19 months ago   313MB
jonssonyan/trojan-panel        latest    53e760c54202   19 months ago   41.4MB
redis                          6.2.7     4b1123a829a1   2 years ago     113MB
caddy                          2.6.2     006d393a4e6a   2 years ago     46.8MB
mariadb                        10.7.3    daf0f023c28d   3 years ago     414MB

✅ 成功
==========================================

[0;34m[2025-08-03 01:16:47] INFO: Docker系统信息[0m
==========================================
诊断项: Docker系统信息
命令: docker info
时间: Sun Aug  3 01:16:47 CST 2025
------------------------------------------
Client: Docker Engine - Community
 Version:    26.1.4
 Context:    default
 Debug Mode: false
 Plugins:
  buildx: Docker Buildx (Docker Inc.)
    Version:  v0.14.1
    Path:     /usr/libexec/docker/cli-plugins/docker-buildx
  compose: Docker Compose (Docker Inc.)
    Version:  v2.27.1
    Path:     /usr/libexec/docker/cli-plugins/docker-compose

Server:
 Containers: 6
  Running: 6
  Paused: 0
  Stopped: 0
 Images: 11
 Server Version: 26.1.4
 Storage Driver: overlay2
  Backing Filesystem: xfs
  Supports d_type: true
  Using metacopy: false
  Native Overlay Diff: true
  userxattr: false
 Logging Driver: json-file
 Cgroup Driver: cgroupfs
 Cgroup Version: 1
 Plugins:
  Volume: local
  Network: bridge host ipvlan macvlan null overlay
  Log: awslogs fluentd gcplogs gelf journald json-file local splunk syslog
 Swarm: inactive
 Runtimes: runc io.containerd.runc.v2
 Default Runtime: runc
 Init Binary: docker-init
 containerd version: d2d58213f83a351ca8f528a95fbd145f5654e957
 runc version: v1.1.12-0-g51d5e94
 init version: de40ad0
 Security Options:
  seccomp
   Profile: builtin
 Kernel Version: 3.10.0-1160.119.1.el7.x86_64
 Operating System: CentOS Linux 7 (Core)
 OSType: linux
 Architecture: x86_64
 CPUs: 2
 Total Memory: 985.5MiB
 Name: solemn
 ID: ddedf5a7-2dd2-4327-9442-fe537a498f12
 Docker Root Dir: /var/lib/docker
 Debug Mode: false
 Experimental: false
 Insecure Registries:
  127.0.0.0/8
 Live Restore Enabled: false

✅ 成功
==========================================

[0;34m[2025-08-03 01:16:47] INFO: Docker资源使用[0m
==========================================
诊断项: Docker资源使用
命令: docker stats --no-stream
时间: Sun Aug  3 01:16:47 CST 2025
------------------------------------------
CONTAINER ID   NAME                   CPU %     MEM USAGE / LIMIT     MEM %     NET I/O   BLOCK I/O         PIDS
bbdadd680fcf   trojan-panel           0.19%     296KiB / 985.5MiB     0.03%     0B / 0B   0B / 0B           2
da539b3cfcba   trojan-panel-ui        0.00%     2.332MiB / 985.5MiB   0.24%     0B / 0B   49.2kB / 0B       3
72674889d77b   trojan-panel-redis     0.18%     2.684MiB / 985.5MiB   0.27%     0B / 0B   4.17MB / 70.6MB   5
387c7b1aa581   trojan-panel-mariadb   0.03%     93.96MiB / 985.5MiB   9.53%     0B / 0B   23.3MB / 3.81GB   21
c883becae68b   trojan-panel-core      0.00%     7.535MiB / 985.5MiB   0.76%     0B / 0B   2.42MB / 0B       6
f3dfa644ed65   trojan-panel-caddy     0.00%     9.145MiB / 985.5MiB   0.93%     0B / 0B   6.62MB / 4.1kB    9

✅ 成功
==========================================

[0;32m[2025-08-03 01:16:50] === 3. 网络配置检查 ===[0m
[0;34m[2025-08-03 01:16:50] INFO: 网络接口[0m
==========================================
诊断项: 网络接口
命令: ip addr show
时间: Sun Aug  3 01:16:50 CST 2025
------------------------------------------
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host 
       valid_lft forever preferred_lft forever
2: ens3: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 9000 qdisc pfifo_fast state UP group default qlen 1000
    link/ether 02:00:17:03:61:12 brd ff:ff:ff:ff:ff:ff
    inet 10.0.0.251/24 brd 10.0.0.255 scope global dynamic ens3
       valid_lft 83090sec preferred_lft 83090sec
    inet6 2603:c021:8001:3566:e306:5c40:f390:7b55/128 scope global dynamic 
       valid_lft 62016sec preferred_lft 58416sec
    inet6 fe80::17ff:fe03:6112/64 scope link 
       valid_lft forever preferred_lft forever
3: docker0: <NO-CARRIER,BROADCAST,MULTICAST,UP> mtu 1500 qdisc noqueue state DOWN group default 
    link/ether 02:42:c5:77:05:c1 brd ff:ff:ff:ff:ff:ff
    inet 172.17.0.1/16 brd 172.17.255.255 scope global docker0
       valid_lft forever preferred_lft forever

✅ 成功
==========================================

[0;34m[2025-08-03 01:16:50] INFO: 监听端口[0m
==========================================
诊断项: 监听端口
命令: netstat -tuln
时间: Sun Aug  3 01:16:50 CST 2025
------------------------------------------
Active Internet connections (only servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State      
tcp        0      0 0.0.0.0:6378            0.0.0.0:*               LISTEN     
tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN     
tcp        0      0 0.0.0.0:8888            0.0.0.0:*               LISTEN     
tcp        0      0 0.0.0.0:9507            0.0.0.0:*               LISTEN     
tcp6       0      0 :::6378                 :::*                    LISTEN     
tcp6       0      0 :::80                   :::*                    LISTEN     
tcp6       0      0 :::8082                 :::*                    LISTEN     
tcp6       0      0 :::22                   :::*                    LISTEN     
tcp6       0      0 :::8863                 :::*                    LISTEN     
tcp6       0      0 :::9507                 :::*                    LISTEN     
tcp6       0      0 :::8100                 :::*                    LISTEN     
udp        0      0 0.0.0.0:68              0.0.0.0:*                          
udp6       0      0 :::8863                 :::*                               
udp6       0      0 fe80::17ff:fe03:611:546 :::*                               

✅ 成功
==========================================

[0;34m[2025-08-03 01:16:50] INFO: Docker网络[0m
==========================================
诊断项: Docker网络
命令: docker network ls
时间: Sun Aug  3 01:16:50 CST 2025
------------------------------------------
NETWORK ID     NAME      DRIVER    SCOPE
fb856b7cfc38   bridge    bridge    local
19367aa70214   host      host      local
bcd9820eb2bd   none      null      local

✅ 成功
==========================================

[0;34m[2025-08-03 01:16:50] INFO: 防火墙规则[0m
==========================================
诊断项: 防火墙规则
命令: iptables -L -n
时间: Sun Aug  3 01:16:50 CST 2025
------------------------------------------
Chain INPUT (policy ACCEPT)
target     prot opt source               destination         

Chain FORWARD (policy DROP)
target     prot opt source               destination         
DOCKER-USER  all  --  0.0.0.0/0            0.0.0.0/0           
DOCKER-ISOLATION-STAGE-1  all  --  0.0.0.0/0            0.0.0.0/0           
ACCEPT     all  --  0.0.0.0/0            0.0.0.0/0            ctstate RELATED,ESTABLISHED
DOCKER     all  --  0.0.0.0/0            0.0.0.0/0           
ACCEPT     all  --  0.0.0.0/0            0.0.0.0/0           
ACCEPT     all  --  0.0.0.0/0            0.0.0.0/0           

Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination         

Chain DOCKER (1 references)
target     prot opt source               destination         

Chain DOCKER-ISOLATION-STAGE-1 (1 references)
target     prot opt source               destination         
DOCKER-ISOLATION-STAGE-2  all  --  0.0.0.0/0            0.0.0.0/0           
RETURN     all  --  0.0.0.0/0            0.0.0.0/0           

Chain DOCKER-ISOLATION-STAGE-2 (1 references)
target     prot opt source               destination         
DROP       all  --  0.0.0.0/0            0.0.0.0/0           
RETURN     all  --  0.0.0.0/0            0.0.0.0/0           

Chain DOCKER-USER (1 references)
target     prot opt source               destination         
RETURN     all  --  0.0.0.0/0            0.0.0.0/0           

✅ 成功
==========================================

[0;34m[2025-08-03 01:16:50] INFO: 网络连通性测试[0m
==========================================
诊断项: 网络连通性测试
命令: ping -c 3 8.8.8.8
时间: Sun Aug  3 01:16:50 CST 2025
------------------------------------------
PING 8.8.8.8 (8.8.8.8) 56(84) bytes of data.
64 bytes from 8.8.8.8: icmp_seq=1 ttl=120 time=1.23 ms
64 bytes from 8.8.8.8: icmp_seq=2 ttl=120 time=1.20 ms
64 bytes from 8.8.8.8: icmp_seq=3 ttl=120 time=1.18 ms

--- 8.8.8.8 ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2002ms
rtt min/avg/max/mdev = 1.187/1.208/1.235/0.020 ms

✅ 成功
==========================================

[0;32m[2025-08-03 01:16:52] === 4. Trojan Panel容器检查 ===[0m
[0;34m[2025-08-03 01:16:52] INFO: 找到Trojan Panel容器: bbdadd680fcf[0m
[0;34m[2025-08-03 01:16:52] INFO: 容器详细信息[0m
==========================================
诊断项: 容器详细信息
命令: docker inspect bbdadd680fcf
时间: Sun Aug  3 01:16:52 CST 2025
------------------------------------------
[
    {
        "Id": "bbdadd680fcf5236c1297a75d96013d3bc4a7bc83ab5e64df15b16bb109473ca",
        "Created": "2025-08-02T17:16:00.726529019Z",
        "Path": "./start.sh",
        "Args": [],
        "State": {
            "Status": "running",
            "Running": true,
            "Paused": false,
            "Restarting": false,
            "OOMKilled": false,
            "Dead": false,
            "Pid": 1450,
            "ExitCode": 0,
            "Error": "",
            "StartedAt": "2025-08-02T17:16:01.126282656Z",
            "FinishedAt": "0001-01-01T00:00:00Z",
            "Health": {
                "Status": "starting",
                "FailingStreak": 1,
                "Log": [
                    {
                        "Start": "2025-08-03T01:16:31.199428364+08:00",
                        "End": "2025-08-03T01:16:31.314843988+08:00",
                        "ExitCode": 1,
                        "Output": "Connecting to localhost:8080 ([::1]:8080)\nwget: can't connect to remote host: Connection refused\n"
                    }
                ]
            }
        },
        "Image": "sha256:30922ef2e65e6fd188cbc9c4c486ec02936265b1bceff6d37cba6377aca998d5",
        "ResolvConfPath": "/var/lib/docker/containers/bbdadd680fcf5236c1297a75d96013d3bc4a7bc83ab5e64df15b16bb109473ca/resolv.conf",
        "HostnamePath": "/var/lib/docker/containers/bbdadd680fcf5236c1297a75d96013d3bc4a7bc83ab5e64df15b16bb109473ca/hostname",
        "HostsPath": "/var/lib/docker/containers/bbdadd680fcf5236c1297a75d96013d3bc4a7bc83ab5e64df15b16bb109473ca/hosts",
        "LogPath": "/var/lib/docker/containers/bbdadd680fcf5236c1297a75d96013d3bc4a7bc83ab5e64df15b16bb109473ca/bbdadd680fcf5236c1297a75d96013d3bc4a7bc83ab5e64df15b16bb109473ca-json.log",
        "Name": "/trojan-panel",
        "RestartCount": 0,
        "Driver": "overlay2",
        "Platform": "linux",
        "MountLabel": "",
        "ProcessLabel": "",
        "AppArmorProfile": "",
        "ExecIDs": null,
        "HostConfig": {
            "Binds": [
                "/tpdata/trojan-panel/config:/tpdata/trojan-panel/config",
                "/tpdata/trojan-panel/logs:/tpdata/trojan-panel/logs"
            ],
            "ContainerIDFile": "",
            "LogConfig": {
                "Type": "json-file",
                "Config": {
                    "max-file": "3",
                    "max-size": "50m"
                }
            },
            "NetworkMode": "host",
            "PortBindings": {},
            "RestartPolicy": {
                "Name": "always",
                "MaximumRetryCount": 0
            },
            "AutoRemove": false,
            "VolumeDriver": "",
            "VolumesFrom": null,
            "ConsoleSize": [
                54,
                136
            ],
            "CapAdd": null,
            "CapDrop": null,
            "CgroupnsMode": "host",
            "Dns": [],
            "DnsOptions": [],
            "DnsSearch": [],
            "ExtraHosts": null,
            "GroupAdd": null,
            "IpcMode": "private",
            "Cgroup": "",
            "Links": null,
            "OomScoreAdj": 0,
            "PidMode": "",
            "Privileged": false,
            "PublishAllPorts": false,
            "ReadonlyRootfs": false,
            "SecurityOpt": null,
            "UTSMode": "",
            "UsernsMode": "",
            "ShmSize": 67108864,
            "Runtime": "runc",
            "Isolation": "",
            "CpuShares": 0,
            "Memory": 0,
            "NanoCpus": 0,
            "CgroupParent": "",
            "BlkioWeight": 0,
            "BlkioWeightDevice": [],
            "BlkioDeviceReadBps": [],
            "BlkioDeviceWriteBps": [],
            "BlkioDeviceReadIOps": [],
            "BlkioDeviceWriteIOps": [],
            "CpuPeriod": 0,
            "CpuQuota": 0,
            "CpuRealtimePeriod": 0,
            "CpuRealtimeRuntime": 0,
            "CpusetCpus": "",
            "CpusetMems": "",
            "Devices": [],
            "DeviceCgroupRules": null,
            "DeviceRequests": null,
            "MemoryReservation": 0,
            "MemorySwap": 0,
            "MemorySwappiness": null,
            "OomKillDisable": false,
            "PidsLimit": null,
            "Ulimits": [],
            "CpuCount": 0,
            "CpuPercent": 0,
            "IOMaximumIOps": 0,
            "IOMaximumBandwidth": 0,
            "MaskedPaths": [
                "/proc/asound",
                "/proc/acpi",
                "/proc/kcore",
                "/proc/keys",
                "/proc/latency_stats",
                "/proc/timer_list",
                "/proc/timer_stats",
                "/proc/sched_debug",
                "/proc/scsi",
                "/sys/firmware",
                "/sys/devices/virtual/powercap"
            ],
            "ReadonlyPaths": [
                "/proc/bus",
                "/proc/fs",
                "/proc/irq",
                "/proc/sys",
                "/proc/sysrq-trigger"
            ]
        },
        "GraphDriver": {
            "Data": {
                "LowerDir": "/var/lib/docker/overlay2/88fd10f3760e802f02a150764efac0714f5504c25ff07121c2d746ddcaf6f7f1-init/diff:/var/lib/docker/overlay2/6757d706ad6565eafd671dd9c3c86d49be083c7521c6012ab73eee4b0ac05c8a/diff:/var/lib/docker/overlay2/df7ddb612bc48f04219e2e68ed70632bd6026ac273628cdc309d1961d3618b3c/diff:/var/lib/docker/overlay2/6074776fc1b9a8376c1f70ec180849b447b604fb534441185d7042c18d1d3b61/diff:/var/lib/docker/overlay2/d1b9eafcd240ddf73581e5c8f9c5ee80af4181f49192a496d8ca1be68fe4b701/diff:/var/lib/docker/overlay2/8fd738ea4fb0e6293049db4bf27baed4296dca1fbe6d087e2eb5e16a56c807fe/diff:/var/lib/docker/overlay2/b3f116f7ac03d95436e254e6829818fefb15beed7bef59cb86f02b05ef8a5e82/diff:/var/lib/docker/overlay2/6914084ebfab4d04a4c61ec08190c8eb3609cd9066be95cb66b806265ed8c863/diff",
                "MergedDir": "/var/lib/docker/overlay2/88fd10f3760e802f02a150764efac0714f5504c25ff07121c2d746ddcaf6f7f1/merged",
                "UpperDir": "/var/lib/docker/overlay2/88fd10f3760e802f02a150764efac0714f5504c25ff07121c2d746ddcaf6f7f1/diff",
                "WorkDir": "/var/lib/docker/overlay2/88fd10f3760e802f02a150764efac0714f5504c25ff07121c2d746ddcaf6f7f1/work"
            },
            "Name": "overlay2"
        },
        "Mounts": [
            {
                "Type": "bind",
                "Source": "/tpdata/trojan-panel/config",
                "Destination": "/tpdata/trojan-panel/config",
                "Mode": "",
                "RW": true,
                "Propagation": "rprivate"
            },
            {
                "Type": "bind",
                "Source": "/tpdata/trojan-panel/logs",
                "Destination": "/tpdata/trojan-panel/logs",
                "Mode": "",
                "RW": true,
                "Propagation": "rprivate"
            }
        ],
        "Config": {
            "Hostname": "solemn",
            "Domainname": "",
            "User": "",
            "AttachStdin": false,
            "AttachStdout": false,
            "AttachStderr": false,
            "ExposedPorts": {
                "8080/tcp": {}
            },
            "Tty": false,
            "OpenStdin": false,
            "StdinOnce": false,
            "Env": [
                "mariadb_ip=127.0.0.1",
                "database=trojan_panel_db",
                "redis_host=127.0.0.1",
                "redis_pass=ZhengZhong1986",
                "mariadb_port=9507",
                "mariadb_user=root",
                "mariadb_pas=ZhengZhong1986",
                "account_table=account",
                "redis_port=6378",
                "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin",
                "host=127.0.0.1",
                "port=3306",
                "user=root",
                "password=123456",
                "redisHost=127.0.0.1",
                "redisPort=6379",
                "redisPassword=123456",
                "serverPort=8080",
                "TZ=Asia/Shanghai",
                "GIN_MODE=release"
            ],
            "Cmd": null,
            "Healthcheck": {
                "Test": [
                    "CMD-SHELL",
                    "wget --no-verbose --tries=1 --spider http://localhost:8080/api/account/getAccountInfo || exit 1"
                ],
                "Interval": 30000000000,
                "Timeout": 10000000000,
                "StartPeriod": 5000000000,
                "Retries": 3
            },
            "Image": "zzsolo/trojan-panel-backend:latest",
            "Volumes": null,
            "WorkingDir": "/app",
            "Entrypoint": [
                "./start.sh"
            ],
            "OnBuild": null,
            "Labels": {
                "maintainer": "zzsolo <https://github.com/zzsolo>",
                "org.opencontainers.image.created": "2025-08-02T17:14:24.735Z",
                "org.opencontainers.image.description": "",
                "org.opencontainers.image.licenses": "",
                "org.opencontainers.image.revision": "d38cfea96ff0464cdc57eb01b3d0bcf3f9cde592",
                "org.opencontainers.image.source": "https://github.com/zzsolo/trojan-panel-backend",
                "org.opencontainers.image.title": "trojan-panel-backend",
                "org.opencontainers.image.url": "https://github.com/zzsolo/trojan-panel-backend",
                "org.opencontainers.image.version": "latest"
            }
        },
        "NetworkSettings": {
            "Bridge": "",
            "SandboxID": "14ade39bc375ddc4a79dcb469f54865f8505fd566afd6f1c3a00fb49602f50d7",
            "SandboxKey": "/var/run/docker/netns/default",
            "Ports": {},
            "HairpinMode": false,
            "LinkLocalIPv6Address": "",
            "LinkLocalIPv6PrefixLen": 0,
            "SecondaryIPAddresses": null,
            "SecondaryIPv6Addresses": null,
            "EndpointID": "",
            "Gateway": "",
            "GlobalIPv6Address": "",
            "GlobalIPv6PrefixLen": 0,
            "IPAddress": "",
            "IPPrefixLen": 0,
            "IPv6Gateway": "",
            "MacAddress": "",
            "Networks": {
                "host": {
                    "IPAMConfig": null,
                    "Links": null,
                    "Aliases": null,
                    "MacAddress": "",
                    "NetworkID": "19367aa70214031c9a32bc8dcbfa1e6124b865ed8879143ddce70bd7531f0a7f",
                    "EndpointID": "3d65c2d87d3fac2cc8e29d096db7cf6b895c5136709d9825e0d9dd96c9ed3f9a",
                    "Gateway": "",
                    "IPAddress": "",
                    "IPPrefixLen": 0,
                    "IPv6Gateway": "",
                    "GlobalIPv6Address": "",
                    "GlobalIPv6PrefixLen": 0,
                    "DriverOpts": null,
                    "DNSNames": null
                }
            }
        }
    }
]

✅ 成功
==========================================

[0;34m[2025-08-03 01:16:52] INFO: 容器完整日志[0m
==========================================
诊断项: 容器完整日志
命令: docker logs bbdadd680fcf
时间: Sun Aug  3 01:16:52 CST 2025
------------------------------------------
Starting Trojan Panel...
Waiting for MySQL database to be ready...
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping

✅ 成功
==========================================

[0;34m[2025-08-03 01:16:52] INFO: 容器最近50行日志[0m
==========================================
诊断项: 容器最近50行日志
命令: docker logs bbdadd680fcf --tail 50
时间: Sun Aug  3 01:16:52 CST 2025
------------------------------------------
Starting Trojan Panel...
Waiting for MySQL database to be ready...
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping
MySQL is unavailable - sleeping

✅ 成功
==========================================

[0;34m[2025-08-03 01:16:52] INFO: 容器资源使用[0m
==========================================
诊断项: 容器资源使用
命令: docker stats bbdadd680fcf --no-stream
时间: Sun Aug  3 01:16:52 CST 2025
------------------------------------------
CONTAINER ID   NAME           CPU %     MEM USAGE / LIMIT   MEM %     NET I/O   BLOCK I/O   PIDS
bbdadd680fcf   trojan-panel   0.16%     400KiB / 985.5MiB   0.04%     0B / 0B   0B / 0B     2

✅ 成功
==========================================

[0;34m[2025-08-03 01:16:54] INFO: 容器内进程[0m
==========================================
诊断项: 容器内进程
命令: docker top bbdadd680fcf
时间: Sun Aug  3 01:16:54 CST 2025
------------------------------------------
UID                 PID                 PPID                C                   STIME               TTY                 TIME                CMD
root                1450                1428                0                   01:16               ?                   00:00:00            /bin/bash ./start.sh
root                1841                1450                0                   01:16               ?                   00:00:00            sleep 2

✅ 成功
==========================================

[0;34m[2025-08-03 01:16:54] INFO: 容器环境变量[0m
==========================================
诊断项: 容器环境变量
命令: docker exec bbdadd680fcf env
时间: Sun Aug  3 01:16:54 CST 2025
------------------------------------------
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
HOSTNAME=solemn
mariadb_ip=127.0.0.1
database=trojan_panel_db
redis_host=127.0.0.1
redis_pass=ZhengZhong1986
mariadb_port=9507
mariadb_user=root
mariadb_pas=ZhengZhong1986
account_table=account
redis_port=6378
host=127.0.0.1
port=3306
user=root
password=123456
redisHost=127.0.0.1
redisPort=6379
redisPassword=123456
serverPort=8080
TZ=Asia/Shanghai
GIN_MODE=release
HOME=/root

✅ 成功
==========================================

[0;34m[2025-08-03 01:16:54] INFO: 容器内应用目录[0m
==========================================
诊断项: 容器内应用目录
命令: docker exec bbdadd680fcf ls -la /tpdata/trojan-panel/
时间: Sun Aug  3 01:16:54 CST 2025
------------------------------------------
total 0
drwxr-xr-x    4 root     root            32 Aug  3 01:16 .
drwxr-xr-x    3 root     root            26 Aug  3 01:16 ..
drwxr-xr-x    4 root     root            77 Jun 27 15:06 config
drwxr-xr-x    2 root     root            30 Jun 27 15:07 logs

✅ 成功
==========================================

[0;34m[2025-08-03 01:16:54] INFO: 容器内日志目录[0m
==========================================
诊断项: 容器内日志目录
命令: docker exec bbdadd680fcf ls -la /tpdata/trojan-panel/logs/
时间: Sun Aug  3 01:16:54 CST 2025
------------------------------------------
total 180
drwxr-xr-x    2 root     root            30 Jun 27 15:07 .
drwxr-xr-x    4 root     root            32 Aug  3 01:16 ..
-rw-r--r--    1 root     root        180434 Aug  2 04:40 trojan-panel.log

✅ 成功
==========================================

[0;34m[2025-08-03 01:16:54] INFO: 容器内配置目录[0m
==========================================
诊断项: 容器内配置目录
命令: docker exec bbdadd680fcf ls -la /tpdata/trojan-panel/config/
时间: Sun Aug  3 01:16:54 CST 2025
------------------------------------------
total 8
drwxr-xr-x    4 root     root            77 Jun 27 15:06 .
drwxr-xr-x    4 root     root            32 Aug  3 01:16 ..
-rw-r--r--    1 root     root           269 Jun 27 15:06 config.ini
drwxr-xr-x    2 root     root            65 Jun 27 15:06 export
-rw-r--r--    1 root     root           224 Jun 27 15:06 rbac_model.conf
drwxr-xr-x    2 root     root            80 Jun 27 15:06 template

✅ 成功
==========================================

[0;34m[2025-08-03 01:16:55] INFO: 二进制文件信息[0m
==========================================
诊断项: 二进制文件信息
命令: docker exec bbdadd680fcf file /tpdata/trojan-panel/trojan-panel
时间: Sun Aug  3 01:16:55 CST 2025
------------------------------------------
